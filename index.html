<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∏–Ω–∏-–∏–≥—Ä–∞ —Å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ–º</title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            background: black url('https://www.transparenttextures.com/patterns/stardust.png');
            color: white;
            margin: 0;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        #game-container { position: absolute; width: 100%; height: 100%; display: none; }
        .player, .heart { width: 50px; height: 50px; position: absolute; }
        .player { background: blue; left: 50%; bottom: 10%; transform: translateX(-50%); }
        .heart { 
            background: url('https://cdn-icons-png.flaticon.com/512/833/833472.png') no-repeat center/cover; 
            left: 50%; 
            top: 10%; 
            transform: translateX(-50%);
        }

        #message { display: none; font-size: 3vw; color: red; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        #congrats-container, #birthday-container, #intro-container {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: none;
        }

        #intro-container { top: 10%; display: block; }
        #congrats-container { top: 20%; }
        #birthday-container { top: 50%; transform: translate(-50%, -50%); }

        h1 { font-size: 4vw; }
        p { font-size: 3vw; }

        button {
            padding: 1vw 3vw;
            font-size: 3vw;
            cursor: pointer;
            background-color: blue;
            color: white;
            border: none;
            border-radius: 5px;
        }

        #congrats-container h1 { color: green; }
        #birthday-container h1 { color: red; }
        #birthday-container p { color: #D64D4D; }

        .bear {
            position: absolute;
            width: 5vw;
            height: 5vw;
            background: url('https://cdn.pixabay.com/photo/2017/08/30/12/32/teddy-2690951_960_720.png') no-repeat center/cover;
            animation: bounce 1.5s ease-in-out infinite;
        }

        .bear-left { left: 10vw; top: 50%; transform: translateY(-50%); }
        .bear-right { right: 10vw; top: 50%; transform: translateY(-50%); }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        #joystick-container {
            position: absolute;
            bottom: 5vw;
            left: 5vw;
            width: 15vw;
            height: 15vw;
            border: 2px solid white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #joystick-inner {
            width: 8vw;
            height: 8vw;
            border: 2px solid white;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            position: relative;
            cursor: pointer;
        }

        #joystick-inner.active {
            background: rgba(255, 255, 255, 0.8);
        }

        #wish-container {
            font-size: 2.5vw;
            color: #FFD700;
            opacity: 0;
            transition: opacity 0.5s;
            min-height: 4vw;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ª–µ—Ç–∞—é—â–∏—Ö —Å–µ—Ä–¥–µ—á–µ–∫ */
        .flying-heart {
            position: fixed;
            width: 30px;
            height: 30px;
            background: url('https://cdn-icons-png.flaticon.com/512/833/833472.png') no-repeat center/contain;
            top: 100vh;
            animation: floatUp 10s linear forwards;
            z-index: 0; /* —á—Ç–æ–±—ã —Å–µ—Ä–¥–µ—á–∫–∏ –±—ã–ª–∏ —Ñ–æ–Ω–æ–º */
            opacity: 0.8;
            pointer-events: none;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0);
                opacity: 0.8;
            }
            100% {
                transform: translateY(-110vh);
                opacity: 0;
            }
        }

        @media (min-width: 768px) {
            h1 { font-size: 3vw; }
            p { font-size: 2vw; }
            button { font-size: 2.5vw; }
            #birthday-container h1 { font-size: 2.5vw; }
            #birthday-container p { font-size: 2vw; }
        }
    </style>
</head>
<body>
    <!-- –í—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="intro-container">
        <h1>üéâ –° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è! üéâ</h1>
        <p>–ß—Ç–æ–±—ã –ø—Ä–æ–π—Ç–∏ –¥–∞–ª—å—à–µ, –ø—Ä–æ–π–¥–∏ –º–∏–Ω–∏-–∏–≥—Ä—É!</p>
        <button id="start-button">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è -->
    <div id="congrats-container">
        <h1>–£–†–ê–ê–ê! –¢—ã –ø—Ä–æ—à–ª–∞ –¥–∞–ª—å—à–µ!</h1>
        <p>–£ —Ç–µ–±—è –≤—Å–µ–≥–¥–∞ –≤—Å—ë –ø–æ–ª—É—á–∞–µ—Ç—Å—è! üí™</p>
        <button id="continue-button">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è —Å –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è -->
    <div id="birthday-container">
        <h1>üéâ –° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è! üéâ</h1>
        <div id="wish-container"></div>
        <div class="bear bear-left"></div>
        <div class="bear bear-right"></div>
    </div>

    <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
    <div id="game-container">
        <div class="player" id="player"></div>
        <div class="heart" id="heart"></div>
    </div>

    <p id="message">üéâ –° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è! üíñüíñüíñ</p>

    <!-- –î–∂–æ–π—Å—Ç–∏–∫ -->
    <div id="joystick-container">
        <div id="joystick-inner"></div>
    </div>

    <script>
        let player = document.getElementById("player");
        let heart = document.getElementById("heart");
        let message = document.getElementById("message");
        let gameContainer = document.getElementById("game-container");
        let introContainer = document.getElementById("intro-container");
        let startButton = document.getElementById("start-button");
        let congratsContainer = document.getElementById("congrats-container");
        let continueButton = document.getElementById("continue-button");
        let birthdayContainer = document.getElementById("birthday-container");
        let joystickContainer = document.getElementById("joystick-container");
        let joystick = document.getElementById("joystick-inner");
        let wishContainer = document.getElementById("wish-container");

        let positionX = window.innerWidth / 2 - 5;
        let positionY = window.innerHeight - 10;
        let heartCaught = false;
        let velocity = 5;
        let playerSpeedX = 0;
        let playerSpeedY = 0;

        startButton.addEventListener("click", function() {
            introContainer.style.display = "none";
            gameContainer.style.display = "block";
            joystickContainer.style.display = "flex";
            gameLoop();
        });

        function movePlayer() {
            if (heartCaught) return;
            positionX += playerSpeedX;
            positionY += playerSpeedY;
            positionX = Math.max(0, Math.min(window.innerWidth - 50, positionX));
            positionY = Math.max(0, Math.min(window.innerHeight - 50, positionY));
            player.style.left = positionX + "px";
            player.style.top = positionY + "px";
        }

        function moveHeart() {
            if (heartCaught) return;
            let maxX = window.innerWidth - 50;
            let maxY = window.innerHeight - 50;
            let randomX = Math.floor(Math.random() * maxX);
            let randomY = Math.floor(Math.random() * maxY);
            heart.style.left = randomX + "px";
            heart.style.top = randomY + "px";
        }

        function checkCollision() {
            if (heartCaught) return;
            let playerRect = player.getBoundingClientRect();
            let heartRect = heart.getBoundingClientRect();
            if (
                playerRect.left < heartRect.right &&
                playerRect.right > heartRect.left &&
                playerRect.top < heartRect.bottom &&
                playerRect.bottom > heartRect.top
            ) {
                heartCaught = true;
                gameContainer.style.display = "none";
                joystickContainer.style.display = "none";
                congratsContainer.style.display = "block";
            }
        }

        setInterval(moveHeart, 1000);

        function gameLoop() {
            movePlayer();
            checkCollision();
            if (!heartCaught) {
                requestAnimationFrame(gameLoop);
            }
        }

        continueButton.addEventListener("click", function() {
            congratsContainer.style.display = "none";
            birthdayContainer.style.display = "block";
            showSequentialWishes();
        });

        const wishTexts = [
    "–ü—É—Å—Ç—å —Å–±—É–¥–µ—Ç—Å—è –≤—Å—ë, –æ —á—ë–º —Ç—ã –º–µ—á—Ç–∞–µ—à—å! üéâ",
    "–ñ–µ–ª–∞—é —Å—á–∞—Å—Ç—å—è, —É–¥–∞—á–∏ –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è! üåü",
    "–°–º–µ–ª–æ –∏–¥–∏ –∫ —Å–≤–æ–µ–π —Ü–µ–ª–∏, –∏ –ø—É—Å—Ç—å –ø—É—Ç—å –±—É–¥–µ—Ç –ª—ë–≥–∫–∏–º! üí™",
    "–ü—É—Å—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –±—É–¥–µ—Ç –ø–æ–ª–æ–Ω —Ä–∞–¥–æ—Å—Ç–∏ –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è! üåà",
    "–¢—ã - —É–Ω–∏–∫–∞–ª—å–Ω–∞, –∏ —ç—Ç–æ—Ç –¥–µ–Ω—å –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–µ–±–µ! üíñ",
    "–ü—É—Å—Ç—å —Ç–≤–æ—è –∂–∏–∑–Ω—å –±—É–¥–µ—Ç –Ω–∞–ø–æ–ª–Ω–µ–Ω–∞ —è—Ä–∫–∏–º–∏ –º–æ–º–µ–Ω—Ç–∞–º–∏ –∏ —Å—á–∞—Å—Ç—å–µ–º! üéà",
    "–¢–≤–æ—è —ç–Ω–µ—Ä–≥–∏—è –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –º–∏—Ä —è—Ä—á–µ! ‚ú®",
    "–ü—É—Å—Ç—å –≤—Å–µ —Ç–≤–æ–∏ –º–µ—á—Ç—ã —Å–±—É–¥—É—Ç—Å—è! üéÅ",
    "–ü—É—Å—Ç—å —ç—Ç–æ—Ç –¥–µ–Ω—å –±—É–¥–µ—Ç —Å–∞–º—ã–º –ª—É—á—à–∏–º –≤ —Ç–≤–æ–µ–π –∂–∏–∑–Ω–∏! üéÇ",
    "–°—á–∞—Å—Ç—å—è, –∑–¥–æ—Ä–æ–≤—å—è –∏ –º–æ—Ä–µ –ø–æ–∑–∏—Ç–∏–≤–∞! üåä",
    "–¢—ã –º–æ–∂–µ—à—å –≤—Å—ë, —á—Ç–æ –∑–∞—Ö–æ—á–µ—à—å! üåü",
    "–¢—ã –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—à—å —Å–∞–º–æ–≥–æ –ª—É—á—à–µ–≥–æ! üíñ",
    "–° –∫–∞–∂–¥—ã–º –≥–æ–¥–æ–º —Ç—ã —Å—Ç–∞–Ω–æ–≤–∏—à—å—Å—è —Ç–æ–ª—å–∫–æ –ª—É—á—à–µ! üå±",
    "–ú–∏—Ä –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ —Ç–≤–æ—ë–º —Å–≤–µ—Ç–µ, –ø—Ä–æ–¥–æ–ª–∂–∞–π —Å–∏—è—Ç—å! üí´",
    "–ü—É—Å—Ç—å —Ç–≤–æ—è –∂–∏–∑–Ω—å –±—É–¥–µ—Ç —Å–∫–∞–∑–æ—á–Ω–æ–π –∏ –≤–æ–ª—à–µ–±–Ω–æ–π! ‚ú®",
    "–¢—ã ‚Äî —Ç–≤–æ—Ä–µ—Ü —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏, –∏ –≤—Å—ë –±—É–¥–µ—Ç –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ! üåü",
    "–ü—É—Å—Ç—å —ç—Ç–æ—Ç –≥–æ–¥ –ø—Ä–∏–Ω–µ—Å—ë—Ç —Ç–µ–±–µ —Ç–æ–ª—å–∫–æ —Ä–∞–¥–æ—Å—Ç—å –∏ —É–¥–∞—á—É! üçÄ",
    "–ü—É—Å—Ç—å —Ç–≤–æ–∏ –¥–Ω–∏ –±—É–¥—É—Ç –Ω–∞–ø–æ–ª–Ω–µ–Ω—ã —Å—á–∞—Å—Ç—å–µ–º –∏ —Å–º–µ—Ö–æ–º! üå∫",
    "–¢—ã ‚Äî –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–∞—è, –ø—Ä–æ–¥–æ–ª–∂–∞–π —É–¥–∏–≤–ª—è—Ç—å –º–∏—Ä! üåç",
    "–° —Ç–æ–±–æ–π –ª–µ–≥–∫–æ –∏ –ø—Ä–∏—è—Ç–Ω–æ, —Ç—ã –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å –Ω–∞ –≤—Å—ë –ª—É—á—à–µ–µ! üíñ",
    "–ü—É—Å—Ç—å –∫–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –¥–µ–Ω—å –±—É–¥–µ—Ç —è—Ä–∫–∏–º –∏ –Ω–µ–æ–±—ã–∫–Ω–æ–≤–µ–Ω–Ω—ã–º! üåü",
    "–ñ–µ–ª–∞—é –º–Ω–æ–≥–æ —Ä–∞–¥–æ—Å—Ç–∏, —Ç–µ–ø–ª–∞ –∏ —Ö–æ—Ä–æ—à–∏—Ö –ª—é–¥–µ–π —Ä—è–¥–æ–º! üåà",
    "–¢—ã –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—à—å —Ç–æ–ª—å–∫–æ –ª—É—á—à–∏—Ö –º–æ–º–µ–Ω—Ç–æ–≤ –≤ –∂–∏–∑–Ω–∏! üéâ",
    "–°—á–∞—Å—Ç—å—è, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è –∏ –º–Ω–æ–≥–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö —ç–º–æ—Ü–∏–π! üåü",
    "–°—É–¥—å–±–∞ —É–ª—ã–±–Ω–µ—Ç—Å—è —Ç–µ–±–µ, –∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –±—É–¥–µ—Ç –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º! üéä",
    "–¢—ã –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ —Å–∏–ª—å–Ω–∞—è –∏ —É–º–Ω–∞—è, –ø—Ä–æ–¥–æ–ª–∂–∞–π –∏–¥—Ç–∏ –≤–ø–µ—Ä—ë–¥! üí™",
    "–¢—ã –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–∞—è! üíñ"
];

        let wishIndex = 0;

        function showSequentialWishes() {
            wishContainer.style.opacity = 0;

            setTimeout(() => {
                wishContainer.textContent = wishTexts[wishIndex];
                wishContainer.style.opacity = 1;
                wishIndex++;
                if (wishIndex >= wishTexts.length) wishIndex = 0;

                setTimeout(showSequentialWishes, 2500);
            }, 500);
        }

        let joystickActive = false;

        joystick.addEventListener("touchstart", function(e) {
            joystickActive = true;
            joystick.classList.add("active");
            updateJoystickPosition(e);
        });

        joystick.addEventListener("touchmove", function(e) {
            if (joystickActive) updateJoystickPosition(e);
        });

        joystick.addEventListener("touchend", function() {
            joystickActive = false;
            joystick.classList.remove("active");
            playerSpeedX = 0;
            playerSpeedY = 0;
        });

        document.addEventListener("keydown", function(e) {
            if (e.key === "ArrowUp") playerSpeedY = -velocity;
            if (e.key === "ArrowDown") playerSpeedY = velocity;
            if (e.key === "ArrowLeft") playerSpeedX = -velocity;
            if (e.key === "ArrowRight") playerSpeedX = velocity;
        });

        function updateJoystickPosition(e) {
            const touch = e.touches[0];
            const rect = joystickContainer.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            const dx = touch.clientX - centerX;
            const dy = touch.clientY - centerY;
            const angle = Math.atan2(dy, dx);

            playerSpeedX = Math.cos(angle) * velocity;
            playerSpeedY = Math.sin(angle) * velocity;

            joystick.style.transform = `translate(${dx}px, ${dy}px)`;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ª–µ—Ç—è—â–∏—Ö —Å–µ—Ä–¥–µ—á–µ–∫
        function createFlyingHeart() {
            const heart = document.createElement('div');
            heart.classList.add('flying-heart');
            heart.style.left = Math.random() * 100 + 'vw';
            document.body.appendChild(heart);

            setTimeout(() => {
                heart.remove();
            }, 10000);
        }

        // –ó–∞–ø—É—Å–∫ –ª–µ—Ç–∞—é—â–∏—Ö —Å–µ—Ä–¥–µ—á–µ–∫ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ birthdayContainer
        const observer = new MutationObserver(() => {
            if (birthdayContainer.style.display === "block") {
                setInterval(createFlyingHeart, 500);
                observer.disconnect(); // —á—Ç–æ–±—ã –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–ª–æ—Å—å
            }
        });

        observer.observe(birthdayContainer, { attributes: true, attributeFilter: ['style'] });
    </script>
    <!-- –î—Ä—É–≥–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->

    <!-- –≠–ª–µ–º–µ–Ω—Ç –¥–ª—è —Ñ–æ–Ω–∞ –º—É–∑—ã–∫–∏ -->
    <audio id="background-music" loop>
        <source src="music/The Cat Empire Positive Music - The Lost Song (–°–∞—É–Ω–¥—Ç—Ä–µ–∫ –∫ —Å–µ—Ä–∏–∞–ª—É –ö—É—Ö–Ω—è) (getmus.me).mp3" type="audio/mpeg">
        –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–µ–≥ audio.
    </audio>
    
    <script>
        // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –º—É–∑—ã–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ —Å —Å–∞–π—Ç–æ–º
        document.body.addEventListener('click', function() {
            var music = document.getElementById('background-music');
            music.play(); // –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
        });
    </script>
    
</body>
</html>